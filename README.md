# API - Museu Liter√°rio Brasileiro üìö# üèõÔ∏è Museu Liter√°rio Brasileiro - API



Uma plataforma completa para explora√ß√£o e gest√£o de obras liter√°rias brasileiras, desenvolvida com Node.js, Express e Prisma ORM. Inclui sistema de seguidores estilo Instagram para escritores.## Descri√ß√£o

API RESTful para um museu virtual de obras liter√°rias nacionais, permitindo cadastro, autentica√ß√£o, upload de imagens, gerenciamento de livros, escritores, favoritos e perfis de usu√°rio.

## üéØ Objetivo

---

O Projeto Museu Liter√°rio Brasileiro √© uma API RESTful que visa preservar e promover a literatura brasileira atrav√©s de uma plataforma digital moderna. A API permite o gerenciamento completo de obras, escritores, usu√°rios, favoritos e um sistema de seguidores, oferecendo funcionalidades de busca, categoriza√ß√£o e descoberta de conte√∫do liter√°rio nacional.

## Funcionalidades Principais

## üåü Funcionalidades Principais- Cadastro e login de usu√°rios com autentica√ß√£o JWT

- Upload de imagem para perfil de usu√°rio e capa de livro

### ‚úÖ Gerenciamento de Livros- CRUD de livros, escritores e favoritos

- ‚úÖ Listagem completa de livros- Filtros e pagina√ß√£o para busca de livros

- ‚úÖ Busca por g√™nero liter√°rio- Valida√ß√£o de dados robusta com Joi

- ‚úÖ Filtros avan√ßados (escritor, ano, dificuldade)- Prote√ß√£o de rotas sens√≠veis

- ‚úÖ CRUD completo para administradores- Relacionamentos entre usu√°rios, livros e escritores

- ‚úÖ Sistema de destaque para obras importantes

---

### ‚úÖ Gerenciamento de Escritores

- ‚úÖ Cat√°logo completo de autores brasileiros## Tecnologias Utilizadas

- ‚úÖ Biografias detalhadas com datas de nascimento/falecimento- Node.js + Express

- ‚úÖ Obras associadas por escritor- Prisma ORM (SQLite)

- ‚úÖ Sistema de fotos/avatares- Joi (valida√ß√£o)

- ‚úÖ Contadores de seguidores din√¢micos- Multer (upload de arquivos)

- JWT (autentica√ß√£o)

### ‚úÖ Sistema de Usu√°rios- Estrutura modular (controllers, models, routes, middleware)

- ‚úÖ Registro e autentica√ß√£o com JWT

- ‚úÖ Tipos de usu√°rio (Normal, Escritor)---

- ‚úÖ Perfis personaliz√°veis

- ‚úÖ Upload de fotos de perfil## Como Rodar o Projeto



### ‚úÖ Sistema de Favoritos1. Instale as depend√™ncias:

- ‚úÖ Adicionar/remover livros favoritos	 ```bash

- ‚úÖ Listagem pessoal de favoritos	 npm install

- ‚úÖ Recomenda√ß√µes baseadas em prefer√™ncias	 ```

2. Configure o banco de dados (SQLite):

### ‚úÖ Sistema de Seguidores (Estilo Instagram)	 ```bash

- ‚úÖ Seguir e deixar de seguir escritores	 npx prisma migrate dev

- ‚úÖ Listar escritores seguidos	 npx prisma generate

- ‚úÖ Visualizar seguidores de escritores	 ```

- ‚úÖ Ranking de escritores mais seguidos3. Inicie o servidor:

- ‚úÖ Estat√≠sticas pessoais de seguimentos	 ```bash

- ‚úÖ Verifica√ß√£o de status de seguimento	 npm run dev

	 ```

### ‚úÖ Dashboard e Estat√≠sticas4. (Opcional) Crie um arquivo `.env` para vari√°veis de ambiente.

- ‚úÖ Estat√≠sticas gerais do sistema

- ‚úÖ An√°lises de popularidade por g√™nero---

- ‚úÖ Ranking de escritores mais populares

- ‚úÖ M√©tricas de usu√°rios ativos## Estrutura de Pastas

- ‚úÖ Estat√≠sticas de seguidores

```

## üõ†Ô∏è Tecnologias Utilizadassrc/

	controllers/

- **Node.js** - Runtime JavaScript	models/

- **Express.js** - Framework web	routes/

- **Prisma ORM** - Object-Relational Mapping	middleware/

- **SQLite** - Banco de dados local	validations/

- **JWT** - Autentica√ß√£o e autoriza√ß√£oprisma/

- **Bcrypt** - Criptografia de senhasuploads/

- **Multer** - Upload de arquivos```

- **Joi** - Valida√ß√£o de dados

- **CORS** - Cross-Origin Resource Sharing---



## üìä Base de Dados## Como Usar a API



O projeto conta com uma rica base de dados pr√©-populada contendo:### Upload de Imagem (Usu√°rio ou Livro)

- Endpoint: `POST /upload/foto`

### üìñ Livros (43 obras)- Formato: `multipart/form-data` com campo `foto`

**Obras de Clarice Lispector (23 obras):**- Resposta: `{ "url": "/uploads/nomedoarquivo.jpg" }`

- **Romances**: Perto do Cora√ß√£o Selvagem (1943), O Lustre (1946), A Cidade Sitiada (1949), A Ma√ß√£ no Escuro (1961), A Paix√£o Segundo G.H. (1964), Uma Aprendizagem ou O Livro dos Prazeres (1969), √Ågua Viva (1973), A Hora da Estrela (1977), Um Sopro de Vida (1978)

- **Contos**: La√ßos de Fam√≠lia (1960), A Legi√£o Estrangeira (1964), Felicidade Clandestina (1971), A Imita√ß√£o da Rosa (1973), Onde Estivestes de Noite (1974), A Via Crucis do Corpo (1974), A Bela e a Fera (1979)### Exemplos de Requisi√ß√µes HTTP

- **Cr√¥nicas**: Para N√£o Esquecer (1978), A Descoberta do Mundo (1984)

- **Literatura Infantil**: O Mist√©rio do Coelho Pensante (1967), A Mulher que Matou os Peixes (1968), A Vida √çntima de Laura (1974), Quase de Verdade (1978), Como Nasceram as Estrelas (1987)#### Registrar usu√°rio

POST /auth/register

**Outras obras cl√°ssicas:**Body (JSON):

- **Machado de Assis**: Dom Casmurro, Mem√≥rias P√≥stumas de Br√°s Cubas```

- **Jos√© de Alencar**: Iracema, O Guarani, Senhora{

- **Lima Barreto**: Triste Fim de Policarpo Quaresma, Recorda√ß√µes do Escriv√£o Isa√≠as Caminha	"nome": "Jo√£o",

- **Rachel de Queiroz**: O Quinze, D√¥ra, Doralina	"nomeUsuario": "joao123",

- **Escritores contempor√¢neos**: Carla Madeira, Concei√ß√£o Evaristo	"email": "joao@email.com",

	"senha": "senha123",

### üë• Escritores (7 autores)	"nascimento": 2000,

- **Machado de Assis** (1839-1908) - Realismo	"idade": 25,

- **Clarice Lispector** (1920-1977) - Literatura Moderna/Introspectiva	"tipo": "NORMAL",

- **Jos√© de Alencar** (1829-1877) - Romantismo	"foto": "/uploads/foto-perfil.jpg" // opcional, use a URL do upload

- **Lima Barreto** (1881-1922) - Pr√©-Modernismo}

- **Rachel de Queiroz** (1910-2003) - Romance Social```

- **Carla Madeira** (1966-) - Literatura Contempor√¢nea

- **Concei√ß√£o Evaristo** (1946-) - Literatura Afro-brasileira#### Login

POST /auth/login

### üé≠ G√™neros Liter√°riosBody (JSON):

- Romance (15 obras)```

- Contos (11 obras){

- Cr√¥nicas (3 obras)	"email": "joao@email.com",

- Literatura Infantil (5 obras)	"senha": "senha123"

- Teatro}

- Poesia```



## üöÄ Instala√ß√£o e Configura√ß√£o#### Criar livro

POST /livros

### Pr√©-requisitosHeaders: Authorization: Bearer <token>

- Node.js 18+ instaladoBody (JSON):

- Git instalado```

{

### Passo a passo	"titulo": "Dom Casmurro",

	"anoLancamento": 1899,

1. **Clone o reposit√≥rio**	"autorId": 1,

```bash	"descricao": "Romance cl√°ssico brasileiro.",

git clone https://github.com/samuelbrag4/pj-museu-literario-api	"mediaPreco": 39.9,

cd pj-museu-literario-api	"imagem": "/uploads/capa-livro.jpg", // use a URL do upload

```	"genero": "Romance",

	"dificuldade": "ALTA",

2. **Instale as depend√™ncias**	"temAdaptacao": true,

```bash	"numeroPaginas": 240

npm install}

``````



3. **Configure o banco de dados**#### Upload de imagem (exemplo com cURL)

```bash```bash

# Gerar o cliente Prismacurl -X POST http://localhost:3000/upload/foto -F "foto=@/caminho/para/imagem.jpg"

npx prisma generate```



# Executar migra√ß√µes#### Outras rotas

npx prisma migrate dev- Listar, buscar, atualizar e deletar usu√°rios, livros, escritores e favoritos seguem o padr√£o REST e est√£o detalhadas nos controllers e nas rotas.



# Popular o banco com dados de exemplo---

npm run seed

```## Valida√ß√µes e Regras de Neg√≥cio



4. **Inicie o servidor**- Todos os dados s√£o validados com Joi antes de serem salvos.

```bash- Campos obrigat√≥rios e formatos aceitos est√£o descritos nos exemplos.

# Desenvolvimento (com auto-reload)- Upload aceita apenas imagens (png, jpg, jpeg, gif, webp) at√© 5MB.

npm run dev- O campo `imagem` (livro) e `foto` (usu√°rio) deve receber a URL retornada pelo upload.



# Produ√ß√£o---

npm start

```## Observa√ß√µes



O servidor estar√° rodando em `http://localhost:5000`- O projeto segue boas pr√°ticas de organiza√ß√£o e seguran√ßa.

- O endpoint de upload pode ser usado tanto para foto de usu√°rio quanto para capa de livro.

## üìö Documenta√ß√£o da API- Para testar, use ferramentas como Postman, Insomnia ou cURL.



### üîê Autentica√ß√£o---



#### POST `/auth/register`## Cr√©ditos

Registra um novo usu√°rio no sistema.

Desenvolvido por Samuel dos Santos Braga  

**Body:**Curso: Desenvolvimento de Sistemas - 2TDS2 - SENAI Valinhos-SP (2025)  

```jsonOrientadores: Felipe Santos e Felipe Mamprim

{

  "nome": "Jo√£o Silva",## Livros

  "email": "joao@email.com",

  "senha": "senha123",### Listar todos os livros (com filtros)

  "tipo": "NORMAL"GET /livros?titulo=Dom&genero=Romance&autor=Machado&dificuldade=ALTA&pagina=1&limite=10

}

```### Buscar livro por ID

GET /livros/1

**Resposta (201):**Headers: Authorization: Bearer <token>

```json

{### Criar livro

  "message": "Usu√°rio criado com sucesso",POST /livros

  "user": {Headers: Authorization: Bearer <token>

    "id": 1,Body (JSON):

    "nome": "Jo√£o Silva",```

    "email": "joao@email.com",{

    "tipo": "NORMAL"	"titulo": "Dom Casmurro",

  },	"anoLancamento": 1899,

  "token": "jwt_token_aqui"	"autorId": 4,

}	"descricao": "Romance cl√°ssico de Machado de Assis.",

```	"mediaPreco": 34.9,

	"imagem": "https://...",

#### POST `/auth/login`	"genero": "Romance",

Autentica um usu√°rio existente.	"dificuldade": "ALTA",

	"temAdaptacao": true,

**Body:**	"numeroPaginas": 240

```json}

{```

  "email": "joao@email.com",

  "senha": "senha123"### Atualizar livro

}PUT /livros/1

```Headers: Authorization: Bearer <token>

Body (JSON):

**Resposta (200):**```

```json{

{	"titulo": "Dom Casmurro (Edi√ß√£o Especial)"

  "message": "Login realizado com sucesso",}

  "user": {```

    "id": 1,

    "nome": "Jo√£o Silva",### Deletar livro

    "email": "joao@email.com",DELETE /livros/1

    "tipo": "NORMAL"Headers: Authorization: Bearer <token>

  },

  "token": "jwt_token_aqui"---

}

```## Escritores



### üìñ Livros### Listar escritores

GET /escritores

#### GET `/livros`

Lista todos os livros dispon√≠veis.---



**Query Parameters:**## Favoritos

- `genero` (opcional): Filtrar por g√™nero

- `autor` (opcional): Filtrar por autor### Listar favoritos

- `dificuldade` (opcional): Filtrar por n√≠vel de dificuldadeGET /favoritos



**Resposta (200):**---

```json

[**Obs:** Para rotas protegidas, sempre inclua o header `Authorization: Bearer <token>`.

  {

    "id": 1,

    "titulo": "Dom Casmurro",# üìö Museu Liter√°rio Brasileiro

    "autor": "Machado de Assis",

    "genero": "Romance",Bem-vindo ao reposit√≥rio do **Museu Liter√°rio Brasileiro**! Este projeto foi desenvolvido por **Samuel dos Santos Braga** como parte do curso de **Desenvolvimento de Sistemas - 2TDS2** no **SENAI Valinhos-SP** (2025).  

    "anoPublicacao": 1899,Orientadores: **Felipe Santos** e **Felipe Mamprim**.

    "sinopse": "Uma das obras mais importantes...",

    "capa": "url_da_capa",---

    "dificuldade": "MEDIO",

    "destaque": true,## üë®‚Äçüíª Sobre o Projeto

    "escritor": {

      "id": 1,O Museu Liter√°rio Brasileiro √© uma plataforma web que funciona como um museu virtual de obras liter√°rias nacionais. O objetivo √© proporcionar uma experi√™ncia moderna, interativa e educativa para amantes da literatura, estudantes e curiosos, permitindo explorar livros, autores, avalia√ß√µes e criar perfis personalizados.

      "nome": "Machado de Assis"

    }---

  }

]## üèõÔ∏è Estrutura do Site

```

O site segue uma arquitetura de m√∫ltiplas p√°ginas, cada uma com uma URL e recurso distinto:

#### GET `/livros/generos`

Lista todos os g√™neros dispon√≠veis.### üåê P√°ginas Principais

- **P√°gina Inicial (/):** Fachada do museu, com t√≠tulo, subt√≠tulo e descri√ß√£o.

**Resposta (200):**- **P√°gina de Livros (/livros):** Cat√°logo principal com busca, filtros e pagina√ß√£o.

```json- **P√°gina de Livro (/livro/{id}):** Detalhes completos de uma obra.

[- **P√°gina de Perfil (/perfil):** √Årea do usu√°rio, favoritos e informa√ß√µes pessoais.

  "Romance",

  "Contos",### üîê P√°ginas de Autentica√ß√£o

  "Cr√¥nicas",- **Login (/login):** Formul√°rio de entrada.

  "Literatura Infantil",- **Cadastro (/cadastro):** Cria√ß√£o de conta.

  "Teatro",

  "Poesia"### üß© Componentes Reutiliz√°veis

]- **Navbar & Footer:** Presentes em todas as p√°ginas (exceto autentica√ß√£o).

```- **Barra de Pesquisa:** Modular, usada em v√°rias √°reas.

- **Card do Livro:** Exibe capa, t√≠tulo, autor e ano.

#### GET `/livros/por-genero`

Lista livros agrupados por g√™nero.---



**Resposta (200):**## ‚öôÔ∏è Funcionalidades por P√°gina

```json

{### üè† P√°gina Inicial

  "Romance": [- T√≠tulo "Museu Liter√°rio Brasileiro", subt√≠tulo e texto convidativo.

    {- Navega√ß√£o para √°reas principais.

      "id": 1,

      "titulo": "Dom Casmurro",### üìñ P√°gina de Livros

      "autor": "Machado de Assis"- Barra de pesquisa por t√≠tulo/autor.

    }- Listagem din√¢mica de livros (lazy loading/pagina√ß√£o).

  ],- Filtros por categoria (Romance, Realismo, etc).

  "Contos": [

    {### üìö P√°gina de Livro

      "id": 2,- Layout de duas colunas, conte√∫do din√¢mico.

      "titulo": "La√ßos de Fam√≠lia",- Detalhes: capa, t√≠tulo, autor, ano, g√™nero, dificuldade, p√°ginas, descri√ß√£o, pre√ßo m√©dio, adapta√ß√µes.

      "autor": "Clarice Lispector"- Avalia√ß√£o m√©dia em estrelas, nota do usu√°rio, favoritos.

    }

  ]### üë§ P√°gina de Perfil

}- Livro de destaque selecion√°vel.

```- Informa√ß√µes pessoais edit√°veis.

- Lista de favoritos categorizados: "Lendo", "Vou Ler", "J√° Li".

#### GET `/livros/autor/:autorId` üîí- Bot√£o de logout seguro.

Lista livros de um autor espec√≠fico. **Requer autentica√ß√£o.**

---

#### GET `/livros/:id` üîí

Obt√©m detalhes de um livro espec√≠fico. **Requer autentica√ß√£o.**## üîÑ L√≥gica de Navega√ß√£o & Autentica√ß√£o



#### POST `/livros` üîí- **Navbar Logada:** Bot√£o perfil e sair.

Cria um novo livro. **Requer autentica√ß√£o.**- **Navbar Deslogada:** Bot√£o "Conta" leva ao login.

- **Login:** Link para cadastro.

#### PUT `/livros/:id` üîí

Atualiza um livro existente. **Requer autentica√ß√£o.**---



#### DELETE `/livros/:id` üîí## üóÑÔ∏è Estrutura de Dados (Prisma)

Remove um livro. **Requer autentica√ß√£o.**

### üë• Tabela User

### üë®‚Äçüíº Escritores- `id`, `name`, `email`, `username`, `password`, `birthYear`, `joinDate`, `featuredBookId`



#### GET `/escritores`### üìö Tabela Book

Lista todos os escritores cadastrados com contador de seguidores.- `id`, `title`, `author`, `releaseYear`, `description`, `price`, `cover`, `genre`, `difficulty`, `pages`, `adaptation`, `averageRating`



**Resposta (200):**### ‚≠ê Tabela UserFavoriteBook

```json- `userId`, `bookId`, `status` (Lendo, Vou Ler, J√° Li)

[

  {### üåü Tabela BookRating

    "id": 1,- `userId`, `bookId`, `rating`

    "nome": "Machado de Assis",

    "biografia": "Machado de Assis foi um escritor brasileiro...",---

    "dataNascimento": "1839-06-21T00:00:00.000Z",

    "dataFalecimento": "1908-09-29T00:00:00.000Z",## üöÄ Rotas de API

    "foto": "url_da_foto",

    "_count": {### üîë Autentica√ß√£o

      "livros": 3,- `POST /api/auth/register` ‚Äî Cria usu√°rio

      "seguidores": 15- `POST /api/auth/login` ‚Äî Autentica e retorna token

    }

  }### üë§ Usu√°rio & Perfil

]- `GET /api/user/profile` ‚Äî Dados do perfil

```- `PUT /api/user/profile` ‚Äî Atualiza perfil

- `PUT /api/user/profile/featured-book` ‚Äî Define livro destaque

#### GET `/escritores/:id`

Obt√©m detalhes de um escritor espec√≠fico, incluindo suas obras e seguidores.### üìö Livros

- `GET /api/books` ‚Äî Lista de livros (busca, filtro, pagina√ß√£o)

**Resposta (200):**- `GET /api/books/popular` ‚Äî Livros populares

```json- `GET /api/books/{id}` ‚Äî Detalhes do livro

{- `POST /api/books/{id}/rate` ‚Äî Avalia√ß√£o do usu√°rio

  "id": 1,

  "nome": "Machado de Assis",### ‚≠ê Favoritos

  "biografia": "Biografia completa...",- `GET /api/user/favorites` ‚Äî Lista de favoritos

  "dataNascimento": "1839-06-21T00:00:00.000Z",- `POST /api/user/favorites` ‚Äî Adiciona favorito

  "dataFalecimento": "1908-09-29T00:00:00.000Z",- `PUT /api/user/favorites/{id}/status` ‚Äî Altera status

  "foto": "url_da_foto",- `DELETE /api/user/favorites/{id}` ‚Äî Remove favorito

  "_count": {

    "seguidores": 15---

  },

  "livros": [## üé® Detalhes de Estiliza√ß√£o

    {

      "id": 1,### üåà Paleta de Cores

      "titulo": "Dom Casmurro",- **Fundo:** `#F7F5EF` (branco suave)

      "genero": "Romance",- **Cards/Cont√™ineres:** `#EDE4D4` (bege suave)

      "anoPublicacao": 1899- **Destaque:** `#B98F5F` (marrom quente)

    }- **Texto Principal:** `#623E31` (marrom escuro)

  ]- **Navbar/Footer:** `#55362E` (marrom profundo)

}

```### üñãÔ∏è Tipografia

- Fonte: **Inter**

#### POST `/escritores` üîí- T√≠tulos: Negrito (`font-weight: 700`)

Cria um novo escritor. **Requer autentica√ß√£o.**- Corpo: Peso normal



#### PUT `/escritores/:id` üîí### üìê Layout & Espa√ßamento

Atualiza dados de um escritor. **Requer autentica√ß√£o.**- Cantos arredondados

- Sombras suaves

#### DELETE `/escritores/:id` üîí- Espa√ßamento generoso

Remove um escritor. **Requer autentica√ß√£o.**

---

### üë• Sistema de Seguidores

## üñºÔ∏è Estilos por P√°gina

#### POST `/seguidores/seguir/:escritorId` üîí

Segue um escritor. **Requer autentica√ß√£o.**### üè† Home

- Navbar/Footer: fundo `#55362E`, texto `#F7F5EF`

**Resposta (201):**- T√≠tulo centralizado, negrito, cor `#623E31`

```json- Carrossel de livros em destaque, fundo `#EDE4D4`

{- Barra de pesquisa em cont√™iner arredondado, borda destaca ao focar

  "message": "Agora voc√™ est√° seguindo Clarice Lispector",- Sobre o desenvolvedor: foto circular, texto `#623E31`, links estilizados

  "seguindo": {

    "id": 1,### üìö Livro (Detalhes)

    "usuarioId": 1,- Layout fluido e responsivo

    "escritorId": 2,- Capa central, sombra proeminente

    "dataInicio": "2025-01-09T10:30:00.000Z"- Autor em box distinto, fundo `#EDE4D4`, foto circular

  }- Outras edi√ß√µes/adapta√ß√µes com t√≠tulos em negrito

}

```### üìñ Livros (Cat√°logo)

- Dividido por categorias, t√≠tulos em negrito `#623E31`

#### DELETE `/seguidores/deixar-de-seguir/:escritorId` üîí- Grade responsiva de cards

Para de seguir um escritor. **Requer autentica√ß√£o.**

### üë§ Perfil

**Resposta (200):**- Informa√ß√µes em lista vertical, foto circular

```json- Campo de senha com √≠cone "olho" `#B98F5F`

{- Bot√£o editar/salvar com cor de destaque

  "message": "Voc√™ parou de seguir Clarice Lispector"- Livro destaque com borda especial

}- Favoritos em grade, etiquetas de status coloridas

```- Bot√£o sair proeminente, fundo `#B98F5F`



#### GET `/seguidores/meus-escritores` üîí### üîê Autentica√ß√£o

Lista os escritores que o usu√°rio segue. **Requer autentica√ß√£o.**- Formul√°rio centralizado, cont√™iner arredondado, sombra suave

- Inputs com borda arredondada, transi√ß√£o para `#B98F5F` ao focar

**Resposta (200):**- Bot√µes padr√£o, fundo `#B98F5F`, texto branco

```json- Link para cadastro estilizado

[

  {---

    "id": 1,

    "dataInicio": "2025-01-09T10:30:00.000Z",## üë®‚Äçüéì Desenvolvedor

    "escritor": {

      "id": 2,**Samuel dos Santos Braga**  

      "nome": "Clarice Lispector",Curso: Desenvolvimento de Sistemas 2TDS2  

      "foto": "url_da_foto",SENAI | Valinhos-SP  

      "_count": {Valinhos-SP, 2025

        "livros": 23,

        "seguidores": 42[![LinkedIn](https://img.shields.io/badge/LinkedIn-blue?logo=linkedin)](https://www.linkedin.com/)  

      }[![GitHub](https://img.shields.io/badge/GitHub-black?logo=github)](https://github.com/)

    }

  }---

]

```## üë®‚Äçüè´ Professores & Orientadores



#### GET `/seguidores/verificar/:escritorId` üîí- Felipe Santos

Verifica se o usu√°rio segue um escritor espec√≠fico. **Requer autentica√ß√£o.**- Felipe Mamprim



**Resposta (200):**---

```json

{## üìù Observa√ß√µes

  "seguindo": true,

  "dataInicio": "2025-01-09T10:30:00.000Z"Projeto livre, desenvolvido para fins educacionais e de demonstra√ß√£o.

}

```---



#### GET `/seguidores/minhas-estatisticas` üîí## ‚ú® Contribua!

Estat√≠sticas pessoais de seguimento do usu√°rio. **Requer autentica√ß√£o.**Sinta-se √† vontade para abrir issues, sugerir melhorias ou enviar pull requests!



**Resposta (200):**---

```json

{## üß™ Testando Requisi√ß√µes com Postman

  "totalEscritoresSeguindo": 3,

  "escritoresPorGenero": [Aqui est√£o exemplos pr√°ticos de como testar as principais rotas da API usando o Postman:

    {

      "genero": "Romance",### 1. Registro de Usu√°rio

      "quantidade": 2**M√©todo:** POST  

    }**URL:** `http://localhost:5000/auth/register`

  ],**Body (JSON):**

  "dataUltimoSeguimento": "2025-01-09T10:30:00.000Z"```json

}{

```	"nome": "Samuel Braga",

	"nomeUsuario": "samuelbraga",

#### GET `/seguidores/escritor/:escritorId/seguidores`	"email": "samuel.d.braga6@aluno.senai.br",

Lista os seguidores de um escritor espec√≠fico (p√∫blico).	"senha": "contaTeste123",

	"nascimento": 2000,

**Resposta (200):**	"idade": 25

```json}

{```

  "escritor": {

    "id": 2,### 2. Login de Usu√°rio

    "nome": "Clarice Lispector"**M√©todo:** POST  

  },**URL:** `http://localhost:5000/auth/login`

  "totalSeguidores": 42,**Body (JSON):**

  "seguidores": [```json

    {{

      "id": 1,	"email": "samuel.d.braga6@aluno.senai.br",

      "dataInicio": "2025-01-09T10:30:00.000Z",	"senha": "contaTeste123"

      "usuario": {}

        "id": 1,```

        "nome": "Jo√£o Silva",**Resposta:**

        "foto": "url_da_foto"```json

      }{

    }	"message": "Login realizado com sucesso!",

  ]	"token": "SEU_TOKEN_JWT_AQUI",

}	"user": { ...dados do usu√°rio... }

```}

```

#### GET `/seguidores/usuario/:usuarioId/seguindo`

Lista os escritores que um usu√°rio espec√≠fico segue (p√∫blico).### 3. Usando o Token JWT

Para acessar rotas protegidas, adicione o token JWT no header:

#### GET `/seguidores/ranking````

Ranking dos escritores mais seguidos (p√∫blico).Authorization: Bearer SEU_TOKEN_JWT_AQUI

```

**Resposta (200):**

```json### 4. Buscar Todos os Usu√°rios (Protegida)

[**M√©todo:** GET  

  {**URL:** `http://localhost:5000/usuarios`

    "id": 2,**Headers:**

    "nome": "Clarice Lispector",```

    "foto": "url_da_foto",Authorization: Bearer SEU_TOKEN_JWT_AQUI

    "_count": {```

      "seguidores": 42,

      "livros": 23### 5. Buscar Usu√°rio por ID (Protegida)

    }**M√©todo:** GET  

  },**URL:** `http://localhost:5000/usuarios/1`

  {**Headers:**

    "id": 1,```

    "nome": "Machado de Assis",Authorization: Bearer SEU_TOKEN_JWT_AQUI

    "_count": {```

      "seguidores": 38,

      "livros": 3### 6. Deletar Usu√°rio (Protegida)

    }**M√©todo:** DELETE  

  }**URL:** `http://localhost:5000/usuarios/1`

]**Headers:**

``````

Authorization: Bearer SEU_TOKEN_JWT_AQUI

#### GET `/seguidores/usuario/:usuarioId/estatisticas````

Estat√≠sticas de seguimento de um usu√°rio espec√≠fico (p√∫blico).

---

### ‚ù§Ô∏è Favoritos

> Para testar outras rotas, siga o mesmo padr√£o: envie o token no header e o corpo conforme o endpoint. Qualquer d√∫vida, consulte os exemplos acima ou pe√ßa ajuda!

#### GET `/favoritos`
Lista todos os favoritos do sistema (p√∫blico).

#### GET `/favoritos/:id`
Obt√©m detalhes de um favorito espec√≠fico (p√∫blico).

#### POST `/favoritos` üîí
Adiciona um livro aos favoritos. **Requer autentica√ß√£o.**

**Body:**
```json
{
  "livroId": 1
}
```

#### PUT `/favoritos/:id` üîí
Atualiza um favorito. **Requer autentica√ß√£o.**

#### DELETE `/favoritos/:id` üîí
Remove um livro dos favoritos. **Requer autentica√ß√£o.**

### üë• Usu√°rios

#### GET `/users`
Lista usu√°rios p√∫blicos (pode filtrar por tipo).

**Query Parameters:**
- `tipo=escritor`: Filtra apenas usu√°rios do tipo escritor

#### GET `/usuarios` üîí
Lista todos os usu√°rios (admin). **Requer autentica√ß√£o.**

#### GET `/usuarios/:id` üîí
Obt√©m detalhes de um usu√°rio espec√≠fico. **Requer autentica√ß√£o.**

#### PUT `/usuarios/:id` üîí
Atualiza dados do usu√°rio (admin). **Requer autentica√ß√£o.**

#### DELETE `/usuarios/:id` üîí
Remove um usu√°rio (admin). **Requer autentica√ß√£o.**

#### GET `/users/:id` üîí
Obt√©m detalhes de um usu√°rio espec√≠fico. **Requer autentica√ß√£o.**

#### PUT `/users/:id` üîí
Atualiza dados do usu√°rio. **Requer autentica√ß√£o.**

#### DELETE `/users/:id` üîí
Remove um usu√°rio. **Requer autentica√ß√£o.**

#### POST `/users/upload-photo` üîí
Upload de foto de perfil. **Requer autentica√ß√£o.**

**Body (multipart/form-data):**
- `foto`: Arquivo de imagem

#### POST `/upload/foto`
Upload de foto (p√∫blico).

**Body (multipart/form-data):**
- `foto`: Arquivo de imagem

### üìä Dashboard

#### GET `/dashboard/estatisticas`
Estat√≠sticas gerais do sistema.

**Resposta (200):**
```json
{
  "totalLivros": 43,
  "totalEscritores": 7,
  "totalUsuarios": 5,
  "totalSeguidores": 28,
  "livrosPorGenero": [
    {
      "genero": "Romance",
      "quantidade": 15
    }
  ],
  "generosMaisPopulares": [
    {
      "genero": "Romance",
      "quantidade": 15
    }
  ],
  "escritoresMaisSeguidos": [
    {
      "nome": "Clarice Lispector",
      "seguidores": 42
    }
  ]
}
```

#### GET `/dashboard/livros-stats`
Estat√≠sticas espec√≠ficas de livros.

#### GET `/dashboard/escritores-stats`
Estat√≠sticas espec√≠ficas de escritores.

#### GET `/dashboard/usuarios-stats`
Estat√≠sticas espec√≠ficas de usu√°rios.

#### GET `/dashboard/generos-stats`
Estat√≠sticas por g√™nero liter√°rio.

## üß™ Testando a API

### Usando curl

1. **Registrar um usu√°rio:**
```bash
curl -X POST http://localhost:5000/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "nome": "Teste Usuario",
    "email": "teste@email.com",
    "senha": "senha123",
    "tipo": "NORMAL"
  }'
```

2. **Fazer login:**
```bash
curl -X POST http://localhost:5000/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "email": "teste@email.com",
    "senha": "senha123"
  }'
```

3. **Listar livros (p√∫blico):**
```bash
curl http://localhost:5000/livros
```

4. **Seguir um escritor (substitua YOUR_TOKEN):**
```bash
curl -X POST http://localhost:5000/seguidores/seguir/2 \
  -H "Authorization: Bearer YOUR_TOKEN"
```

5. **Ver ranking de escritores mais seguidos:**
```bash
curl http://localhost:5000/seguidores/ranking
```

6. **Acessar rota protegida (substitua YOUR_TOKEN):**
```bash
curl -X GET http://localhost:5000/livros/1 \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### Usando ferramentas gr√°ficas

Recomendamos o uso de ferramentas como **Insomnia**, **Postman** ou **Thunder Client** (extens√£o do VS Code) para uma experi√™ncia mais amig√°vel ao testar as rotas da API.

### Dados de Teste

O sistema j√° vem com dados pr√©-cadastrados ap√≥s executar o comando `npm run seed`:

**Usu√°rios de exemplo:**
- Email: `usuario@teste.com` | Senha: `senha123` | Tipo: NORMAL
- Email: `escritor@teste.com` | Senha: `senha123` | Tipo: ESCRITOR

## üìä Resumo de Endpoints

### Total de Endpoints: 43

**üîì P√∫blicos (19 endpoints):**
- 2 Autentica√ß√£o (`/auth/*`)
- 3 Livros (`/livros`, `/livros/generos`, `/livros/por-genero`)
- 2 Escritores (`/escritores`, `/escritores/:id`)
- 2 Favoritos (`/favoritos`, `/favoritos/:id`)
- 1 Usu√°rios (`/users`)
- 5 Dashboard (`/dashboard/*`)
- 4 Seguidores p√∫blicos

**üîí Protegidos (24 endpoints):**
- 3 Livros CRUD
- 3 Escritores CRUD
- 3 Favoritos CRUD
- 7 Usu√°rios CRUD e upload
- 5 Seguidores pessoais
- 3 Usu√°rios admin

### Por Categoria:
- **Autentica√ß√£o**: 2 endpoints
- **Livros**: 8 endpoints (3 p√∫blicos, 5 protegidos)
- **Escritores**: 5 endpoints (2 p√∫blicos, 3 protegidos)
- **Favoritos**: 5 endpoints (2 p√∫blicos, 3 protegidos)
- **Usu√°rios**: 10 endpoints (1 p√∫blico, 9 protegidos)
- **Seguidores**: 9 endpoints (4 p√∫blicos, 5 protegidos)
- **Dashboard**: 5 endpoints (todos p√∫blicos)

## üìÅ Estrutura do Projeto

```
pj-museu-literario-api/
‚îú‚îÄ‚îÄ prisma/
‚îÇ   ‚îú‚îÄ‚îÄ dev.db                    # Banco SQLite
‚îÇ   ‚îú‚îÄ‚îÄ schema.prisma             # Schema do banco (com modelo Seguidor)
‚îÇ   ‚îú‚îÄ‚îÄ seed.js                   # Dados iniciais (43 livros, 7 escritores)
‚îÇ   ‚îî‚îÄ‚îÄ migrations/               # Hist√≥rico de migra√ß√µes
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ controllers/              # L√≥gica de neg√≥cio
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ authController.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ livroController.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ escritorController.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ favoritoController.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ seguidorController.js    # NOVO: Sistema de seguidores
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ dashboardController.js
‚îÇ   ‚îú‚îÄ‚îÄ middleware/               # Middlewares
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ authMiddleware.js     # Atualizado com req.user
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ uploadMiddleware.js
‚îÇ   ‚îú‚îÄ‚îÄ models/                   # Modelos de dados
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ escritorModel.js      # Atualizado com contadores
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ favoritoModel.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ livroModel.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ usuarioModel.js
‚îÇ   ‚îú‚îÄ‚îÄ routes/                   # Defini√ß√£o de rotas
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.routes.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ livroRoutes.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ escritorRoutes.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ favoritoRoutes.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ seguidorRoutes.js     # NOVO: 9 endpoints de seguidores
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboardRoutes.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.routes.js
‚îÇ   ‚îú‚îÄ‚îÄ validations/              # Valida√ß√µes Joi
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ escritorValidation.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ favoritoValidation.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ livroValidation.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ usuarioValidation.js
‚îÇ   ‚îî‚îÄ‚îÄ server.js                 # Ponto de entrada
‚îú‚îÄ‚îÄ uploads/                      # Arquivos enviados (10 imagens de exemplo)
‚îú‚îÄ‚îÄ package.json
‚îî‚îÄ‚îÄ README.md
```

## üîß Vari√°veis de Ambiente

Crie um arquivo `.env` na raiz do projeto (opcional, valores padr√£o j√° est√£o configurados):

```env
DATABASE_URL="file:./dev.db"
JWT_SECRET="seu_jwt_secret"
PORT=5000
```

## üöÄ Deploy

### Prepara√ß√£o para produ√ß√£o

1. **Configure as vari√°veis de ambiente de produ√ß√£o**
2. **Execute as migra√ß√µes no banco de produ√ß√£o:**
```bash
npx prisma migrate deploy
```
3. **Gere o cliente Prisma:**
```bash
npx prisma generate
```
4. **Popular o banco (apenas primeira vez):**
```bash
npm run seed
```
5. **Inicie o servidor:**
```bash
npm start
```

### Op√ß√µes de deploy recomendadas:
- **Railway**
- **Render**
- **Heroku**
- **Vercel** (com adapta√ß√µes)

## ü§ù Contribuindo

1. Fa√ßa um fork do projeto
2. Crie uma branch para sua feature (`git checkout -b feature/AmazingFeature`)
3. Commit suas mudan√ßas (`git commit -m 'Add some AmazingFeature'`)
4. Push para a branch (`git push origin feature/AmazingFeature`)
5. Abra um Pull Request

## üìù Changelog

### v1.0.0 (Atual)
- ‚úÖ Sistema completo de autentica√ß√£o JWT
- ‚úÖ CRUD completo para livros, escritores e favoritos
- ‚úÖ **NOVO**: Sistema de seguidores estilo Instagram (9 endpoints)
- ‚úÖ Sistema de upload de imagens
- ‚úÖ Dashboard com estat√≠sticas avan√ßadas
- ‚úÖ Base de dados rica com 43 livros e 7 escritores
- ‚úÖ **23 obras completas de Clarice Lispector**
- ‚úÖ Valida√ß√µes robustas com Joi
- ‚úÖ Middleware de autentica√ß√£o com req.user
- ‚úÖ Contadores din√¢micos de seguidores
- ‚úÖ Ranking de escritores mais seguidos
- ‚úÖ Documenta√ß√£o completa atualizada

## üìÑ Licen√ßa

Este projeto est√° sob a licen√ßa MIT. Veja o arquivo [LICENSE](LICENSE) para mais detalhes.

## üë§ Autor

**Samuel Bragan√ßa** (samuelbrag4)
- GitHub: [@samuelbrag4](https://github.com/samuelbrag4)

## üôè Agradecimentos

- SENAI pela oportunidade de desenvolvimento
- Comunidade brasileira de literatura
- Desenvolvedores das tecnologias utilizadas
- Obra completa de Clarice Lispector como inspira√ß√£o

---

üìö **Museu Liter√°rio Brasileiro** - Preservando e promovendo a literatura nacional atrav√©s da tecnologia e conex√µes sociais.